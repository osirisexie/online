(function(){angular.module("onlineApp",["ui.router","ngAnimate","ngFileUpload","foundation","as.sortable","jcs-autoValidate","angular-ladda","ngResource","duScroll"]).config(e);e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"];function e(e,t,r){t.otherwise("/home");e.state("home",{url:"/home",templateUrl:"/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).state("videos",{url:"/videos",templateUrl:"/videos/videos.view.html",controller:"videoCtrl",controllerAs:"vm"}).state("oneVideo",{url:"/videos/:courseid/:id",templateUrl:"/videoDetail/videoDetail.view.html",controller:"videoDetailCtrl",controllerAs:"vm"}).state("videoDetail",{url:"/videoDetail/:videoid",templateUrl:"/videoDetail/videoDetail.view.html",controller:"videoCtrl",controllerAs:"vm"}).state("products",{url:"/products",templateUrl:"/products/products.view.html",controller:"productCtrl",controllerAs:"vm"}).state("oneProduct",{url:"/products/:productid",templateUrl:"/productDetail/productDetail.view.html",controller:"productDetailCtrl",controllerAs:"vm"}).state("courses",{url:"/courses?search",templateUrl:"/courses/courses.view.html",controller:"courseCtrl",controllerAs:"vm"}).state("oneCourse",{url:"/courses/:courseid",templateUrl:"/courseDetail/courseDetail.view.html",controller:"courseDetailCtrl",controllerAs:"vm"}).state("test",{url:"/test",templateUrl:"/test/test.view.html",controller:"testsCtrl",controllerAs:"vm"}).state("register",{url:"/register",templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).state("login",{url:"/login",templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).state("admin",{url:"/admin",templateUrl:"/admin/admin.view.html",data:{requireLogin:true}}).state("adminVideo",{url:"/admin/videos",templateUrl:"/admin/videos.view.html",controller:"videoCtrl",controllerAs:"vm",data:{requireLogin:true}}).state("adminCourse",{url:"/admin/courses",templateUrl:"/admin/courses.view.html",controller:"homeCtrl",controllerAs:"vm",data:{requireLogin:true}}).state("editCourse",{url:"/admin/courses/:courseid",templateUrl:"/admin/editcourse.view.html",controller:"courseDetailCtrl",controllerAs:"vm",data:{requireLogin:true}}).state("editVideo",{url:"/admin/videos/:id",templateUrl:"/admin/editVideo.view.html",controller:"videoDetailCtrl",controllerAs:"vm",data:{requireLogin:true}}).state("adminProduct",{url:"/admin/products",templateUrl:"/admin/products.view.html",controller:"productCtrl",controllerAs:"vm",data:{requireLogin:true}}).state("editProduct",{url:"/admin/products/:productid",templateUrl:"/admin/editProduct.view.html",controller:"productDetailCtrl",controllerAs:"vm",data:{requireLogin:true}}).state("user",{url:"/me",templateUrl:"/user/me.view.html",controller:"userCtrl",controllerAs:"vm",data:{requireLogin:true}}).state("verify",{url:"/verify/:token",templateUrl:"/auth/verify/verify.view.html",controller:"verifyCtrl",controllerAs:"vm"}).state("upload",{url:"/upload",templateUrl:"/test/test.view.html",controller:"testsCtrl",controllerAs:"vm"});r.html5Mode({enabled:false,requireBase:false})}angular.module("onlineApp").run(t);t.$inject=["$rootScope","$state","authentication"];function t(e,t,r){e.$on("$stateChangeStart",function(o,i,n,s,u){var c=i.data!==undefined&&i.data.requireLogin;if(c){if(!r.isLoggedIn()){t.go("login");o.preventDefault();return}else{if(!r.isVerified()){t.go("verify");o.preventDefault();return}else{if(i.name=="admin"){if(!r.isAdmin()){t.go("home");o.preventDefault();return}}}}}else{if(i.name=="login"){e.returnPage=s.name;if(s.name=="register"){e.returnPage="home"}e.returnParams=u}return}})}angular.module("onlineApp").filter("secondsToDateTime",[function(){return function(e){return new Date(1970,0,1).setSeconds(e)}}]).controller("vactrl",["$scope",function(e){e.va="xx"}])})();(function(){angular.module("onlineApp").controller("registerCtrl",e);e.$inject=["$location","authentication","$state"];function e(e,t,r){var o=this;o.pageHeader={title:"Create a new Loc8r account"};o.credentials={name:"",email:"",password:""};o.returnPage=e.search().page||"/";o.onSubmit=function(){o.formError="";if(!o.credentials.name||!o.credentials.email||!o.credentials.password){o.formError="All fields required, please try again";return false}else{o.doRegister()}};o.doRegister=function(){o.formError="";t.register(o.credentials).error(function(e){o.formError=e}).then(function(){r.go("verify")})}}})();(function(){angular.module("onlineApp").controller("loginCtrl",e);e.$inject=["$state","authentication","$rootScope","userR"];function e(e,t,r,o){var i=this;i.credentials={email:"",password:""};i.onSubmit=function(){i.formError="";if(!i.credentials.email||!i.credentials.password){i.formError="All fields required, please try again";return false}else{i.doLogin()}};i.doLogin=function(){i.formError="";t.login(i.credentials).error(function(e){i.formError=e}).then(function(){var i=o.get({id:t.currentUser().id},function(){r.user=i;r.products=[];r.courses=[];r.videos=[];i.enroll.forEach(function(e){r.products.push(e.product._id);e.product.courses.forEach(function(e){r.courses.push(e._id);e.videos.forEach(function(e){r.videos.push(e)})})})});e.go(r.returnPage,r.returnParams)})}}})();(function(){angular.module("onlineApp").controller("verifyCtrl",e);e.$inject=["$state","authentication","$stateParams","userR","$rootScope"];function e(e,t,r,o,i){var n=this;n.verfied=t.isVerified();if(!n.verfied&&r.token){t.verify(r.token).then(function(){var r=o.get({id:t.currentUser().id},function(){i.user=r;i.products=[];i.courses=[];i.videos=[];r.enroll.forEach(function(e){i.products.push(e.product._id);e.product.courses.forEach(function(e){i.courses.push(e._id);e.videos.forEach(function(e){i.videos.push(e)})})})});e.go("home")})}}})();(function(){angular.module("onlineApp").controller("testsCtrl",["$scope","Upload","$timeout",function(e,t,r){e.uploadFiles=function(o,i){e.f=o;e.errFile=i&&i[0];if(o){o.upload=t.upload({url:"/api/upload",data:{file:o,testdata:"xxx"}});o.upload.then(function(e){r(function(){o.result=e.data})},function(t){if(t.status>0)e.errorMsg=t.status+": "+t.data},function(e){o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})}}}])})();angular.module("onlineApp").controller("homeCtrl",homeCtrl);homeCtrl.$inject=["courseData","Upload","videoData","helpers","authentication","coursesR","$scope"];function homeCtrl(e,t,r,o,i,n,s){var u=this;u.labels=o.labels;u.pageHeader={title:"Online Classroom"};u.formData={};u.formData.labels=[];u.addlabel=function(e){if(u.formData.labels.indexOf(e)==-1){u.formData.labels.push(e)}};u.removelabel=function(e){u.formData.labels.splice(e,1)};u.courses=n.query({id:"",popular:-1,search:""});u.coursesDate=n.query({id:"",data:-1,search:""});o.getVideos(r,u);u.onSubmit=function(){u.addCourse(u.formData);u.courses=n.query({id:"",date:-1,search:""})};u.addCourse=function(t){e.addCourse({title:t.title,description:t.description,videos:t.videos,labels:t.labels}).success(function(){console.log("success")});return false};u.deleteCourse=function(e){var t=n.delete({id:e});t.$promise.then(function(){u.courses=n.query({id:"",date:-1,search:""})})}}(function(){angular.module("onlineApp").controller("videoCtrl",e);e.$inject=["videoData","$timeout","authentication","$rootScope","finishVideo","videoR"];function e(e,t,r,o,i,n){var s=this;s.vlist=o.videos;o.$watch("user",function(e,t){s.vlist=o.videos});s.submitting=false;e.videos().success(function(e){s.videos=e});s.onSubmit=function(){s.submitting=true;s.addVideo(s.formData);e.videos().success(function(e){s.videos=e;t(function(){s.submitting=false},500)})};s.addVideo=function(t){e.addVideo({title:t.title,description:t.description,videoid:t.videoid,length:t.length}).success(function(e){});return false};s.finish=function(e){i.update({uid:o.user._id,vid:e})};s.deleteVideo=function(e){var t=n.delete({id:e});t.$promise.then(function(){s.videos=n.query()})}}})();(function(){angular.module("onlineApp").controller("videoDetailCtrl",e);e.$inject=["$stateParams","videoData","videoR","coursesR","$sce"];function e(e,t,r,o,n){var s=this;s.flag=false;s.videoid=e.id;s.video=r.get({id:s.videoid});s.video.$promise.then(function(){var t="https://player.vimeo.com/video/"+s.video.videoid+"?api=1&player_id=player1";s.url=n.trustAsResourceUrl(t);s.flag=true;if(e.courseid){s.courseid=e.courseid;s.course=o.get({id:e.courseid});s.course.$promise.then(function(){s.cvideos=s.course.videos;for(i=0;i<s.cvideos.length;i++){if(s.video._id==s.cvideos[i]._id){s.vindex=i;break}}s.prevideo=i==0?null:s.cvideos[i-1];s.nexvideo=i==s.cvideos.length-1?null:s.cvideos[i+1];s.cvideos.forEach(function(e){e.course=s.courseid;e.currentid=s.videoid})})}});s.onEdit=function(){s.submitting=true;s.video.$update({id:s.videoid});s.video.$promise.then(function(){s.submitting=false;console.log("success")})};s.addVideo=function(e){t.addVideo({title:e.title,description:e.description,videoid:e.videoid,length:e.length}).success(function(e){});return false};s.error="";s.search="";t.videos().success(function(e){s.videos=e});s.onAddChapter=function(){if(s.formData&&s.formData.Ctitle&&s.formData.Csecs){s.error="";s.attachChapter(s.formData)}else{s.error="All fields required"}};s.remove=function(e){s.video.chapters.splice(e,1)};s.onUpdateChapter=function(){s.onEditchapter(s.video.chapters)};s.onEditchapter=function(r){t.editChapter(e.id,{chapters:r}).success(function(){alert("Success")});return false};s.attachChapter=function(e){s.video.chapters.push({title:e.Ctitle,secs:e.Csecs});return false}}})();(function(){angular.module("onlineApp").controller("productCtrl",e);e.$inject=["productData","coursesR","helpers","productsR"];function e(e,t,r,o){var i=this;r.getProducts(e,i);i.courses=t.query();i.onSubmit=function(){i.addProduct(i.formData);r.getProducts(e,i)};i.addProduct=function(t){e.addProduct({title:t.title,description:t.description,courses:t.courses,service:t.service}).success(function(e){});return false};i.deleteProduct=function(t){var n=o.delete({id:t});n.$promise.then(function(){r.getProducts(e,i);console.log("success")})}}})();(function(){angular.module("onlineApp").controller("productDetailCtrl",e);e.$inject=["$stateParams","productData","helpers","courseData","productsR"];function e(e,t,r,o,i){var n=this;n.productid=e.productid;n.productDetail=i.get({id:n.productid});r.getCourses(o,n);n.onAddCourse=function(){n.formData.courses.forEach(function(e){n.productDetail.courses.push(JSON.parse(e))})};n.remove=function(e){n.productDetail.courses.splice(e,1)};n.onEditCourses=function(){var e=[];n.productDetail.courses.forEach(function(t){e.push(t._id)});t.editCourses(n.productid,{courses:e}).success(function(){console.log("success")})};n.onEdit=function(){n.productDetail.$update({id:n.productid});n.productDetail.$promise.then(function(){console.log("success")})}}})();(function(){angular.module("onlineApp").controller("courseDetailCtrl",e);e.$inject=["$rootScope","$stateParams","courseData","helpers","videoData","coursesR","$uiViewScroll","enrollR","userR","productByCourse","$scope","Upload","$timeout"];function e(e,t,r,o,i,n,s,u,c,a,l,d,f){var p=this;p.labels=o.labels;p.addlabel=function(e){if(p.course.labels.indexOf(e)==-1){p.course.labels.push(e)}};p.removelabel=function(e){p.course.labels.splice(e,1)};p.user=e.user;p.uplist=e.products;p.courselist=e.courses;e.$watch("user",function(t,r){p.user=e.user;p.uplist=e.products;p.courselist=e.courses});p.courseid=t.courseid;p.activatenum=[];p.course=n.get({id:p.courseid});p.course.$promise.then(function(){p.course.videos.forEach(function(e){p.activatenum.push(false);p.activatenum[0]=true});if(p.course.cover){p.coverurl=p.course.cover}});p.products=a.query({cid:p.courseid});p.products.$promise.then(function(){p.products.forEach(function(e){e.videonum=0;e.totaltime=0;e.courses.forEach(function(t){e.videonum=e.videonum+t.videos.length;t.videos.forEach(function(t){e.totaltime=e.totaltime+t.length})})})});p.activate=function(e){p.activatenum[e]=!p.activatenum[e]};p.scroll=function(e){var t=document.querySelectorAll("#"+e);console.log(t);s(t)};o.getVideos(i,p);p.onEditVideo=function(){v()};function v(){var e=[];p.course.videos.forEach(function(t){e.push(t._id)});r.editVideos(p.courseid,{videos:e}).success(function(){console.log("success")});return false}p.addVideos=function(){p.formData.videos.forEach(function(e){p.course.videos.push(JSON.parse(e))})};p.remove=function(e){p.course.videos.splice(e,1)};p.enroll=function(t){if(p.user){u.update({uid:p.user._id,pid:t}).$promise.then(function(){var t=c.get({id:p.user._id},function(){e.user=t;e.products=[];e.courses=[];e.videos=[];t.enroll.forEach(function(t){e.products.push(t.product._id);t.product.courses.forEach(function(t){e.courses.push(t._id);t.videos.forEach(function(t){e.videos.push(t)})})})})})}};p.onEdit=function(){p.course.$update({id:p.courseid});p.course.$promise.then(function(){console.log("success")})};p.uploadFiles=function(e,t){p.f=e;p.errFile=t&&t[0];if(e){e.upload=d.upload({url:"/api/upload",data:{file:e,id:p.courseid}});e.upload.then(function(t){p.coverurl=t.data.fname;f(function(){e.result=t.data})},function(e){if(e.status>0)p.errorMsg=e.status+": "+e.data},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})}}}})();(function(){angular.module("onlineApp").controller("navigationCtrl",e);e.$inject=["$window","authentication","$rootScope","userR"];function e(e,t,r,o){var i=this;i.userinfo=t;if(t.isLoggedIn()){var n=o.get({id:t.currentUser().id},function(){r.user=n;r.products=[];r.courses=[];r.videos=[];n.enroll.forEach(function(e){r.products.push(e.product._id);e.product.courses.forEach(function(e){r.courses.push(e._id);e.videos.forEach(function(e){r.videos.push(e)})})})})}}})();(function(){var e=angular.module("onlineApp");e.controller("userCtrl",t).filter("courselist",function(){return function(e,t){var r=[];if(e&&t){e.forEach(function(e){if(t.indexOf(e.course._id)>-1){r.push(e)}})}return r}}).filter("totaltime",function(){return function(e){var t=0;if(e){e.forEach(function(e){t=t+e.length})}return t}});t.$inject=["$rootScope","userR","authentication","helpers","$state","$scope","$interval"];function t(e,t,r,o,i,n,s){var u=this;var c=["python","R","Big Data","Machine Learning"];var a=Math.floor(Math.random()*4);var l=a;u.words=[c[a]];u.now=true;u.courses=[];u.user=o.getUser(r,t,u,"chistory");u.courselist=e.courses;e.$watch("user",function(){u.courselist=e.courses});o.logoutHome(e,n,i);u.setnow=function(){u.now=true};u.unsetnow=function(){u.now=false};s(d,5e3);function d(){while(a==l){a=Math.floor(Math.random()*4)}l=a;u.words=[c[a]]}}})();(function(){var e=angular.module("onlineApp");e.controller("courseCtrl",t);e.filter("coursefilter",function(){return function(e,t){e=e||[];var r=[];if(t=="All"){return e}else{e.forEach(function(e){if(e.labels.indexOf(t)>-1){r.push(e)}});return r}}});t.$inject=["coursesR","$state","$scope","$filter","helpers"];function t(e,t,r,o,i){var n=this;n.labels=["All"];i.labels.forEach(function(e){n.labels.push(e)});n.sorttime=true;n.top=true;n.date=-1;n.popular=-1;n.set=false;n.searchtext="";if(t.params.search){n.searchtext=t.params.search;t.transitionTo("courses",{search:""},{notify:false})}n.filter="All";r.$watch("scrollPos",function(e,t){if(n.set==false){if(e>70){if(r.scrolldown==true){n.top=false}}else{n.top=true}}});n.sortdate=function(){if(!n.sorttime){n.sorttime=true}else{n.date=-1*n.date}n.courses=e.query({id:"",date:n.date,search:n.searchtext});n.courses.$promise.then(function(){n.backup=n.courses;n.courses=o("coursefilter")(n.backup,n.filter)})};n.getlabel=function(e){n.filter=e;n.courses=o("coursefilter")(n.backup,e)};n.setpopular=function(){if(n.sorttime){n.sorttime=false}else{n.popular=-1*n.popular}n.courses=e.query({id:"",search:n.searchtext,popular:n.popular});n.courses.$promise.then(function(){n.backup=n.courses;n.courses=o("coursefilter")(n.backup,n.filter)})};n.clear=function(){n.searchtext="";if(n.sorttime==true){n.courses=e.query({id:"",date:n.date,search:n.searchtext});n.courses.$promise.then(function(){n.backup=n.courses;n.courses=o("coursefilter")(n.backup,n.filter)})}else{n.courses=e.query({id:"",date:n.date,search:n.searchtext,popular:n.popular});n.courses.$promise.then(function(){n.backup=n.courses;n.courses=o("coursefilter")(n.backup,n.filter)})}};n.search=function(){if(n.sorttime==true){n.courses=e.query({id:"",date:n.date,search:n.searchtext})}else{n.courses=e.query({id:"",date:n.date,search:n.searchtext,popular:n.popular})}n.backup=n.courses};n.toggleTop=function(){if(n.top==true){n.set=true}else{n.set=false}n.top=!n.top};n.courses=e.query({id:"",date:n.date,search:n.searchtext,popular:n.popular});n.backup=n.courses}})();angular.module("onlineApp").service("courseData",courseData);courseData.$inject=["$http","coursesR"];function courseData(e,t){var r=function(){return e.get("/api/courses")};var o=function(t){return e.post("/api/courses",t)};var i=function(t){return e.get("/api/courses/"+t)};var n=function(t,r){return e.post("/api/courses/videos/"+t,r)};return{courses:r,addCourse:o,courseDetail:i,editVideos:n}}(function(){angular.module("onlineApp").service("videoData",e);e.$inject=["$http"];function e(e){var t=function(){return e.get("/api/videos")};var r=function(t){return e.post("/api/videos",t)};var o=function(t){return e.get("/api/videos/"+t)};function i(t,r){return e.post("/api/videos/chapters/"+t,r)}return{editChapter:i,videoDetail:o,videos:t,addVideo:r}}})();(function(){angular.module("onlineApp").service("productData",e);e.$inject=["$http"];function e(e){var t=function(){return e.get("/api/products")};var r=function(t){return e.post("/api/products",t)};var o=function(t){return e.get("/api/products/"+t)};var i=function(t,r){return e.post("/api/products/courses/"+t,r)};return{products:t,addProduct:r,productDetail:o,editCourses:i}}})();(function(){angular.module("onlineApp").service("authentication",e);e.$inject=["$http","$window","$rootScope"];function e(e,t,r){var o="";var i=function(e){t.localStorage["onlineclass-token"]=e};var n=function(){return t.localStorage["onlineclass-token"]};var s=function(){var e=n();if(e){var r=JSON.parse(t.atob(e.split(".")[1]));return r.exp>Date.now()/1e3}else{return false}};var u=function(){var e=n();if(e){var r=JSON.parse(t.atob(e.split(".")[1]));return r.verified}else{return false}};var c=function(){var e=n();if(e){var r=JSON.parse(t.atob(e.split(".")[1]));if(r.admin){return r.admin}else{return false}}else{return false}};var a=function(){if(s()){var e=n();var r=JSON.parse(t.atob(e.split(".")[1]));return{id:r._id,email:r.email,name:r.name,enroll:r.enroll}}};register=function(t){return e.post("/api/register",t).success(function(e){i(e.token)})};login=function(t){return e.post("/api/login",t).success(function(e){i(e.token)})};logout=function(){t.localStorage.removeItem("onlineclass-token");delete r.user;delete r.products;delete r.courses;delete r.videos};verify=function(r){return e.get("/api/verify/"+r).success(function(e){var r=n();if(r){t.localStorage.removeItem("onlineclass-token");i(e.token)}else{i(e.token)}})};return{user:null,currentUser:a,saveToken:i,getToken:n,isLoggedIn:s,isVerified:u,register:register,login:login,verify:verify,logout:logout,isAdmin:c}}})();(function(){angular.module("onlineApp").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}})();(function(){angular.module("onlineApp").directive("banner",e).controller("bannerCtrl",["$scope","$state",function(e,t){e.performSearch=function(){t.go("courses",{search:e.search})}}]);function e(){return{restrict:"EA",templateUrl:"/common/directives/banner/banner.template.html",controller:"bannerCtrl"}}})();(function(){angular.module("onlineApp").directive("scrolly",function(){return{restrict:"EAC",link:function(e,t,r){var o=t[0];e.scrollPos=o.scrollTop;t.bind("scroll",function(){if(o.scrollTop>e.scrollPos){e.scrolldown=true;e.$apply()}else{e.scrolldown=false;e.$apply()}e.scrollPos=o.scrollTop;e.$apply()})}}})})();(function(){angular.module("onlineApp").directive("vimeoctrl",["$window",function(e){return{restrict:"EA",replace:true,scope:{},link:function(t){var r=document.getElementById("player1");var o=document.getElementById("chapters");var n=t.$parent.vm;n.test="x";if(r){n.video.$promise.then(function(){n.h=document.getElementById("player1").offsetHeight;o.style.height=n.h+"px"})}if(r){n.sec=0;n.active=-1;var s=$f(document.getElementById("player1"));document.getElementById("player1").onload=function(){};s.addEvent("ready",function(){s.addEvent("playProgress",u);1});function u(e){n.sec=e.seconds;t.$apply();n.active=c(n.video.chapters,n.sec)}function c(e,t){var r=e.length-1;for(i=r;i>=0;i--){if(t>=e[i].secs){return i;break}}}n.seek=function(e,t){s.api("seekTo",e);s.api("play");n.active=t};var a=angular.element(e);a.bind("resize",function(){n.h=document.getElementById("player1").offsetHeight;o.style.height=n.h+"px"});t.$watch(function(){return n.active},function(e){o.scrollTop=(n.active-2)*66})}}}}])})();(function(){angular.module("onlineApp").factory("coursesR",e).factory("productsR",t).factory("enrollR",r).factory("userR",o).factory("finishVideo",["$resource",function(e){return e("/api/users/:uid/:vid",{},{update:{method:"POST",params:{uid:"@uid",vid:"@vid"}}})}]).factory("productByCourse",["$resource",function(e){return e("/api/products/getcourse/:cid",{},{query:{method:"GET",isArray:true,params:{cid:"@cid"}}})}]).factory("videoR",["$resource",function(e){return e("/api/videos/:id",{},{update:{method:"PUT",params:{id:"@id"}}})}]);e.$inject=["$resource"];function e(e){return e("/api/courses/:id",{},{update:{method:"PUT",params:{id:"@id"}}})}t.$inject=["$resource"];function t(e){return e("/api/products/:id",{},{update:{method:"PUT",params:{id:"@id"}}})}r.$inject=["$resource"];function r(e){return e("/api/enroll/:uid/:pid",{},{update:{method:"POST",params:{uid:"@uid",pid:"@pid"}}})}o.$inject=["$resource"];function o(e){return e("/api/users/:id")}})();(function(){angular.module("onlineApp").service("helpers",e);function e(){function e(e,t){e.courses().success(function(e){t.courses=e})}function t(e,t){e.videos().success(function(e){t.videos=e})}function r(e,t){e.products().success(function(e){t.products=e})}function o(e,t,r,o){e[t](o).success(function(e){r[t]=e})}function i(e,t,r,o){var i=t.get({id:e.currentUser().id});i.$promise.then(function(e){r[o]=e[o]});return i}function n(e,t){var r=[];t.forEach(function(t){var o=e.get({id:t});o.$promise.then(function(){r.push(o)})});return r}function s(e,t,r){t.user=e.user;e.$watch("user",function(){t.user=e.user});t.$watch("user",function(e,t){if(!e&&t){r.go("home")}})}return{logoutHome:s,getCourses:e,getVideos:t,getProducts:r,getData:o,getUser:i,getListCourses:n,labels:["PYTHON","R","BEGINNER","ADVANCED"]}}})();